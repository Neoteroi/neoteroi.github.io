
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Rodi, an implementation of Dependency Injection container for Python">
      
      
        <meta name="author" content="Roberto Prevato">
      
      
        <link rel="canonical" href="https://www.neoteroi.dev/rodi/getting-started/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../registering-types/">
      
      
      <link rel="icon" href="../img/neoteroi.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Getting started - Rodi</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/neoteroi.css">
    
      <link rel="stylesheet" href="../css/extra.css?v=20221120">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T65MX5XNF2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T65MX5XNF2');
</script>

    
    
  
  
    
  
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="Rodi - Getting started">
  <meta property="og:description" content="Rodi, an implementation of Dependency Injection container for Python">
  <meta property="og:url" content="https://www.neoteroi.dev/rodi/getting-started/">
  <meta property="og:image" content="https://www.neoteroi.dev/rodi/img/banner.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1080">
  <meta property="og:image:height" content="568">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@RobertoPrevato">
  <meta name="twitter:creator" content="@RobertoPrevato">
  <meta name="twitter:title" content="Rodi - Getting started">
  <meta name="twitter:description" content="Rodi, an implementation of Dependency Injection container for Python">
  <meta name="twitter:image" content="https://www.neoteroi.dev/rodi/img/banner.png">
  <script>
    (function () {
        var fullscreen = localStorage.getItem("FULLSCREEN") || "N";
        if (fullscreen === "Y") {
            document.documentElement.classList.add("fullscreen");
        }
    })();
  </script>

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-with-rodi" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header" style="--bg-color: teal">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Rodi" class="md-header__button md-logo" aria-label="Rodi" data-md-component="logo">
      
  <img src="../img/neoteroi-w.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Rodi
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting started
            
          </span>
        </div>
      </div>
    </div>
    <form id="fullscreen-form" class="md-header__option" data-md-component="fullscreen">
      <input class="md-option" aria-label="Enter full screen" type="radio" name="__fullscreen" id="__fullscreen">
      <label title="Full screen" class="md-header__button md-icon" id="full-screen" for="__fullscreen">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 5h5v2H7v3H5zm9 0h5v5h-2V7h-3zm3 9h2v5h-5v-2h3zm-7 3v2H5v-5h2v3z"/></svg>
      </label>
      <input class="md-option" aria-label="Exit full screen" type="radio" name="__fullscreen" id="__fullscreen_no">
      <label title="Exit full screen" class="md-header__button md-icon" id="full-screen-exit" for="__fullscreen_no">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 14h5v2h-3v3h-2zm-9 0h5v5H8v-3H5zm3-9h2v5H5V8h3zm11 3v2h-5V5h2v3z"/></svg>
      </label>
    </form>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Neoteroi/rodi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Neoteroi/Rodi
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Rodi" class="md-nav__button md-logo" aria-label="Rodi" data-md-component="logo">
      
  <img src="../img/neoteroi-w.svg" alt="logo">

    </a>
    Rodi
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Neoteroi/rodi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Neoteroi/Rodi
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-of-dependency-injection" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of dependency injection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview of dependency injection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inversion-of-control" class="md-nav__link">
    <span class="md-ellipsis">
      Inversion of Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-injection" class="md-nav__link">
    <span class="md-ellipsis">
      Dependency Injection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-inversion-principle" class="md-nav__link">
    <span class="md-ellipsis">
      Dependency Inversion Principle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-repository-pattern-example" class="md-nav__link">
    <span class="md-ellipsis">
      The Repository pattern example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rodis-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Rodi's use cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rodi&#39;s use cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#container-lifetime" class="md-nav__link">
    <span class="md-ellipsis">
      Container lifetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sync-vs-async" class="md-nav__link">
    <span class="md-ellipsis">
      Sync vs Async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      Type annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatic-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Automatic aliases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../registering-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registering types
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dependency-inversion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dependecy inversion
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../async/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with async
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../context-managers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Context managers
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../union-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Union types
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Errors
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About Rodi
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neoteroi docs home
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-of-dependency-injection" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of dependency injection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview of dependency injection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inversion-of-control" class="md-nav__link">
    <span class="md-ellipsis">
      Inversion of Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-injection" class="md-nav__link">
    <span class="md-ellipsis">
      Dependency Injection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-inversion-principle" class="md-nav__link">
    <span class="md-ellipsis">
      Dependency Inversion Principle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-repository-pattern-example" class="md-nav__link">
    <span class="md-ellipsis">
      The Repository pattern example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rodis-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Rodi's use cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rodi&#39;s use cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#container-lifetime" class="md-nav__link">
    <span class="md-ellipsis">
      Container lifetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sync-vs-async" class="md-nav__link">
    <span class="md-ellipsis">
      Sync vs Async
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      Type annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatic-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Automatic aliases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  
                  


<h1 id="getting-started-with-rodi">Getting started with Rodi<a class="headerlink" href="#getting-started-with-rodi" title="Permanent link">&para;</a></h1>
<p>This page introduces the basics of using Rodi, including:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> An overview of dependency injection.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> The use cases Rodi is intended for.</li>
</ul>
<h2 id="overview-of-dependency-injection">Overview of dependency injection<a class="headerlink" href="#overview-of-dependency-injection" title="Permanent link">&para;</a></h2>
<p>Consider the following example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">:</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="o">...</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">:</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependency</span><span class="p">:</span> <span class="n">A</span><span class="p">):</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dependency</span> <span class="o">=</span> <span class="n">dependency</span>
</code></pre></div>
<p>The type <code>B</code> depends upon the type <code>A</code>, because it requires an instance of <code>A</code>
in its constructor. In other words, <code>A</code> is a <em>dependency</em> of <code>B</code>.</p>
<p>For a more concrete example, consider the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProductsRepository</span><span class="p">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides methods to read, write, and delete products information.&quot;&quot;&quot;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProductsService</span><span class="p">:</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides business logic for managing products.&quot;&quot;&quot;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repository</span><span class="p">:</span> <span class="n">ProductsRepository</span><span class="p">):</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repository</span> <span class="o">=</span> <span class="n">repository</span>
</code></pre></div>
<p>The <code>ProductsService</code> requires an instance of <code>ProductsRepository</code>. The former
handles business logic, while the latter defines a type responsible for
storing, reading, and deleting product information.</p>
<p>Imagine we also need to send emails when certain events happen, the
<code>ProductsService</code> would likely have an additional dependency:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProductsService</span><span class="p">:</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides business logic for managing products.&quot;&quot;&quot;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>        <span class="n">repository</span><span class="p">:</span> <span class="n">ProductsRepository</span><span class="p">,</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>        <span class="n">email_handler</span><span class="p">:</span> <span class="n">EmailHandler</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="p">):</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repository</span> <span class="o">=</span> <span class="n">repository</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">email_handler</span> <span class="o">=</span> <span class="n">email_handler</span>
</code></pre></div>
<p>Encapsulating the code that performs data access operations (<code>ProductsRepository</code>)
and that sends emails (<code>EmailHandler</code>) into dedicated classes is the right
approach, as the same functionality can be reused in other services (e.g.,
<em>OrdersService, AccountsService</em>) without duplicating code.</p>
<hr />
<p>Dependencies <em>could also</em> be instantiated by the classes that need them:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProductsService</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides business logic for managing products.&quot;&quot;&quot;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repository</span> <span class="o">=</span> <span class="n">ProductsRepository</span><span class="p">()</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">email_handler</span> <span class="o">=</span> <span class="n">EmailHandler</span><span class="p">()</span>
</code></pre></div>
<p>However, this approach has several limitations.</p>
<ul>
<li><strong>Scalability Issues</strong>: As the application grows, managing dependencies
  manually within classes becomes cumbersome. It can lead to duplicated code
  and make the system harder to maintain.</li>
<li><strong>Tight Coupling</strong>: The <code>ProductsService</code> class is tightly coupled to
  <em>concrete</em> implementations of its dependencies. This makes it less convenient
  to replace <code>ProductsRepository</code> and <code>EmailHandler</code> with different
  implementations (e.g., a mock for testing or a different database backend).</li>
<li><strong>Reduced Testability</strong>: Since dependencies are instantiated within the
  class, it is necessary to modify the properties of instances of
  <code>ProductsService</code>, to replace them with mocks or stubs during unit testing.</li>
<li><strong>Lack of Flexibility</strong>: If the application needs to use a different
  implementation of <code>ProductsRepository</code> (e.g., for different environments or
  configurations), the source code of the <code>ProductsService</code> class must be
  modified.</li>
<li><strong>Code Duplication</strong>: If multiple classes need the same dependency, each
  class would need to instantiate it, leading to duplicated code and increased
  maintenance overhead.</li>
<li><strong>Configuration Management</strong>: Managing configuration settings (e.g., database
  connection strings or API keys) becomes harder because they are scattered
  across multiple classes instead of being centralized.</li>
<li><strong>Runtime Flexibility</strong>: Instantiating dependencies directly in the class
  makes it harder to dynamically change or configure dependencies at runtime
  (e.g., switching to a different implementation based on environment
  variables).</li>
</ul>
<p>Alternatively, dependencies could be instantiated at the module level and
managed as global variables.
Instantiating dependencies as globals at module level is generally not ideal,
as it leads to:</p>
<ul>
<li><strong>Tight Coupling to Global State</strong>: When dependencies are global, any part of
  the application can access and modify them. This makes the code tightly
  coupled to the global state, leading to unpredictable behavior and bugs that
  are hard to trace.</li>
<li><strong>Reduced Testability</strong>: Global dependencies make unit testing difficult
  because tests cannot easily isolate or mock dependencies. Each test might
  inadvertently affect or be affected by the global state, leading to flaky
  tests.</li>
</ul>
<p>Dependency injection can help addressing the problems listed above.</p>
<h3 id="inversion-of-control">Inversion of Control<a class="headerlink" href="#inversion-of-control" title="Permanent link">&para;</a></h3>
<p><strong>Inversion of Control (IoC)</strong> is a design principle in which the control of
object creation and dependency management is inverted from the class itself to
an external entity, such as a framework or container. Instead of a class
instantiating its dependencies directly, they are provided to the class from
the outside. This promotes loose coupling and enhances testability.
<strong>Dependency Injection</strong> is a common implementation of IoC.</p>
<h3 id="dependency-injection">Dependency Injection<a class="headerlink" href="#dependency-injection" title="Permanent link">&para;</a></h3>
<p><strong>Dependency Injection</strong> is a design principle where a class does not create
its own dependencies. Instead, the dependencies are provided (or "injected")
into the class from the outside. This makes the class more flexible, easier to
test, and less dependent on specific implementations.</p>
<p>If we consider again the classes <code>A</code> and <code>B</code> described earlier, they can be
registered and resolved using Rodi this way:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># example1.py</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">:</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="o">...</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">:</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependency</span><span class="p">:</span> <span class="n">A</span><span class="p">):</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dependency</span> <span class="o">=</span> <span class="n">dependency</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># main.py</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">example1</span><span class="w"> </span><span class="kn">import</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">rodi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Container</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">()</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="c1"># register types:</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="c1"># resolve B</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="n">example</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="c1"># the container automatically resolves dependencies</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">dependency</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Completely non-intrusive.</p>
<p>Notice that Rodi is completely non-intrusive and does <strong>not</strong> require any changes to the
source code of the types it handles. This was one of the library's primary design goals.</p>
</div>
<p>In this example, both <code>A</code> and <code>B</code> are concrete types. Rodi can resolve concrete
types without any issues. However, the true power of dependency injection
becomes evident when we use <em>abstract types</em> or <em>interfaces</em> to define
dependencies. Let's talk about the <em>Dependency Inversion Principle</em>.</p>
<h3 id="dependency-inversion-principle">Dependency Inversion Principle<a class="headerlink" href="#dependency-inversion-principle" title="Permanent link">&para;</a></h3>
<p>The <strong>Dependency Inversion Principle (DIP)</strong> is a design principle that says
high-level modules (like business logic) should not depend on low-level modules
(like database access). Instead, <em>both</em> should depend on abstractions, like
interfaces or abstract classes. This makes the code more flexible and easier
to change because you can swap out the low-level details without affecting the
high-level logic. Inversion of Control aligns with the Dependency Inversion
Principle.</p>
<p>Consider the following example, of <code>ProductsService</code>, <code>ProductsRepository</code>,
and <code>SQLProductsRepository</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span>
<span class="normal"><a href="#__codelineno-6-33">33</a></span>
<span class="normal"><a href="#__codelineno-6-34">34</a></span>
<span class="normal"><a href="#__codelineno-6-35">35</a></span>
<span class="normal"><a href="#__codelineno-6-36">36</a></span>
<span class="normal"><a href="#__codelineno-6-37">37</a></span>
<span class="normal"><a href="#__codelineno-6-38">38</a></span>
<span class="normal"><a href="#__codelineno-6-39">39</a></span>
<span class="normal"><a href="#__codelineno-6-40">40</a></span>
<span class="normal"><a href="#__codelineno-6-41">41</a></span>
<span class="normal"><a href="#__codelineno-6-42">42</a></span>
<span class="normal"><a href="#__codelineno-6-43">43</a></span>
<span class="normal"><a href="#__codelineno-6-44">44</a></span>
<span class="normal"><a href="#__codelineno-6-45">45</a></span>
<span class="normal"><a href="#__codelineno-6-46">46</a></span>
<span class="normal"><a href="#__codelineno-6-47">47</a></span>
<span class="normal"><a href="#__codelineno-6-48">48</a></span>
<span class="normal"><a href="#__codelineno-6-49">49</a></span>
<span class="normal"><a href="#__codelineno-6-50">50</a></span>
<span class="normal"><a href="#__codelineno-6-51">51</a></span>
<span class="normal"><a href="#__codelineno-6-52">52</a></span>
<span class="normal"><a href="#__codelineno-6-53">53</a></span>
<span class="normal"><a href="#__codelineno-6-54">54</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1"># domain/products.py</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="nd">@dataclass</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">Product</span><span class="p">:</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a>    <span class="n">price</span><span class="p">:</span> <span class="nb">float</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="hll"><span class="c1"># Abstraction: ProductsRepository</span>
</span><a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="hll"><span class="k">class</span><span class="w"> </span><span class="nc">ProductsRepository</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="sd">    Abstract base class for product repositories.</span>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="sd">    Defines the interface for data access operations.</span>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-6-20" name="__codelineno-6-20"></a>
<a id="__codelineno-6-21" name="__codelineno-6-21"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-6-22" name="__codelineno-6-22"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_products</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Product</span><span class="p">]:</span>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve all products.&quot;&quot;&quot;</span>
<a id="__codelineno-6-24" name="__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-6-26" name="__codelineno-6-26"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_product_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Product</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-6-27" name="__codelineno-6-27"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a product by its ID.&quot;&quot;&quot;</span>
<a id="__codelineno-6-28" name="__codelineno-6-28"></a>
<a id="__codelineno-6-29" name="__codelineno-6-29"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-6-30" name="__codelineno-6-30"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_product</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product</span><span class="p">:</span> <span class="n">Product</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new product.&quot;&quot;&quot;</span>
<a id="__codelineno-6-32" name="__codelineno-6-32"></a>
<a id="__codelineno-6-33" name="__codelineno-6-33"></a>
<a id="__codelineno-6-34" name="__codelineno-6-34"></a><span class="hll"><span class="c1"># High-level module: ProductsService</span>
</span><a id="__codelineno-6-35" name="__codelineno-6-35"></a><span class="hll"><span class="k">class</span><span class="w"> </span><span class="nc">ProductsService</span><span class="p">:</span>
</span><a id="__codelineno-6-36" name="__codelineno-6-36"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-6-37" name="__codelineno-6-37"></a><span class="sd">    Provides business logic for managing products.</span>
<a id="__codelineno-6-38" name="__codelineno-6-38"></a><span class="sd">    Depends on an abstract ProductsRepository.</span>
<a id="__codelineno-6-39" name="__codelineno-6-39"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-6-40" name="__codelineno-6-40"></a>
<a id="__codelineno-6-41" name="__codelineno-6-41"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">repository</span><span class="p">:</span> <span class="n">ProductsRepository</span><span class="p">):</span>
<a id="__codelineno-6-42" name="__codelineno-6-42"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repository</span> <span class="o">=</span> <span class="n">repository</span>
<a id="__codelineno-6-43" name="__codelineno-6-43"></a>
<a id="__codelineno-6-44" name="__codelineno-6-44"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_products</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Product</span><span class="p">]:</span>
<a id="__codelineno-6-45" name="__codelineno-6-45"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve all products.&quot;&quot;&quot;</span>
<a id="__codelineno-6-46" name="__codelineno-6-46"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">repository</span><span class="o">.</span><span class="n">get_all_products</span><span class="p">()</span>
<a id="__codelineno-6-47" name="__codelineno-6-47"></a>
<a id="__codelineno-6-48" name="__codelineno-6-48"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_product_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Product</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-6-49" name="__codelineno-6-49"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a product by its ID.&quot;&quot;&quot;</span>
<a id="__codelineno-6-50" name="__codelineno-6-50"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">repository</span><span class="o">.</span><span class="n">get_product_by_id</span><span class="p">(</span><span class="n">product_id</span><span class="p">)</span>
<a id="__codelineno-6-51" name="__codelineno-6-51"></a>
<a id="__codelineno-6-52" name="__codelineno-6-52"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_product</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product</span><span class="p">:</span> <span class="n">Product</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-6-53" name="__codelineno-6-53"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new product.&quot;&quot;&quot;</span>
<a id="__codelineno-6-54" name="__codelineno-6-54"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">repository</span><span class="o">.</span><span class="n">create_product</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span>
<span class="normal"><a href="#__codelineno-7-24">24</a></span>
<span class="normal"><a href="#__codelineno-7-25">25</a></span>
<span class="normal"><a href="#__codelineno-7-26">26</a></span>
<span class="normal"><a href="#__codelineno-7-27">27</a></span>
<span class="normal"><a href="#__codelineno-7-28">28</a></span>
<span class="normal"><a href="#__codelineno-7-29">29</a></span>
<span class="normal"><a href="#__codelineno-7-30">30</a></span>
<span class="normal"><a href="#__codelineno-7-31">31</a></span>
<span class="normal"><a href="#__codelineno-7-32">32</a></span>
<span class="normal"><a href="#__codelineno-7-33">33</a></span>
<span class="normal"><a href="#__codelineno-7-34">34</a></span>
<span class="normal"><a href="#__codelineno-7-35">35</a></span>
<span class="normal"><a href="#__codelineno-7-36">36</a></span>
<span class="normal"><a href="#__codelineno-7-37">37</a></span>
<span class="normal"><a href="#__codelineno-7-38">38</a></span>
<span class="normal"><a href="#__codelineno-7-39">39</a></span>
<span class="normal"><a href="#__codelineno-7-40">40</a></span>
<span class="normal"><a href="#__codelineno-7-41">41</a></span>
<span class="normal"><a href="#__codelineno-7-42">42</a></span>
<span class="normal"><a href="#__codelineno-7-43">43</a></span>
<span class="normal"><a href="#__codelineno-7-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="c1"># data/sql/products.py</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">domain.products</span><span class="w"> </span><span class="kn">import</span> <span class="n">Product</span><span class="p">,</span> <span class="n">ProductsRepository</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="hll"><span class="c1"># Low-level module: SQLProductsRepository</span>
</span><a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="hll"><span class="k">class</span><span class="w"> </span><span class="nc">SQLProductsRepository</span><span class="p">(</span><span class="n">ProductsRepository</span><span class="p">):</span>
</span><a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="sd">    Concrete implementation of ProductsRepository using a SQL database.</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_connection</span><span class="p">):</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">db_connection</span> <span class="o">=</span> <span class="n">db_connection</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_products</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Product</span><span class="p">]:</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve all products from the database.&quot;&quot;&quot;</span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT id, name, description, price FROM products&quot;</span><span class="p">)</span>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a>        <span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<a id="__codelineno-7-19" name="__codelineno-7-19"></a>        <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-7-20" name="__codelineno-7-20"></a>            <span class="n">Product</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">price</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<a id="__codelineno-7-21" name="__codelineno-7-21"></a>            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span>
<a id="__codelineno-7-22" name="__codelineno-7-22"></a>        <span class="p">]</span>
<a id="__codelineno-7-23" name="__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_product_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Product</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-7-25" name="__codelineno-7-25"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a product by its ID.&quot;&quot;&quot;</span>
<a id="__codelineno-7-26" name="__codelineno-7-26"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<a id="__codelineno-7-27" name="__codelineno-7-27"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
<a id="__codelineno-7-28" name="__codelineno-7-28"></a>            <span class="s2">&quot;SELECT id, name, description, price FROM products WHERE id = ?&quot;</span><span class="p">,</span>
<a id="__codelineno-7-29" name="__codelineno-7-29"></a>            <span class="p">(</span><span class="n">product_id</span><span class="p">,),</span>
<a id="__codelineno-7-30" name="__codelineno-7-30"></a>        <span class="p">)</span>
<a id="__codelineno-7-31" name="__codelineno-7-31"></a>        <span class="n">row</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
<a id="__codelineno-7-32" name="__codelineno-7-32"></a>        <span class="k">if</span> <span class="n">row</span><span class="p">:</span>
<a id="__codelineno-7-33" name="__codelineno-7-33"></a>            <span class="k">return</span> <span class="n">Product</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">price</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<a id="__codelineno-7-34" name="__codelineno-7-34"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-7-35" name="__codelineno-7-35"></a>
<a id="__codelineno-7-36" name="__codelineno-7-36"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_product</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">product</span><span class="p">:</span> <span class="n">Product</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-7-37" name="__codelineno-7-37"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert a new product into the database.&quot;&quot;&quot;</span>
<a id="__codelineno-7-38" name="__codelineno-7-38"></a>        <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<a id="__codelineno-7-39" name="__codelineno-7-39"></a>        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
<a id="__codelineno-7-40" name="__codelineno-7-40"></a>            <span class="s2">&quot;INSERT INTO products (name, description, price) VALUES (?, ?, ?)&quot;</span><span class="p">,</span>
<a id="__codelineno-7-41" name="__codelineno-7-41"></a>            <span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">product</span><span class="o">.</span><span class="n">price</span><span class="p">),</span>
<a id="__codelineno-7-42" name="__codelineno-7-42"></a>        <span class="p">)</span>
<a id="__codelineno-7-43" name="__codelineno-7-43"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">db_connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<a id="__codelineno-7-44" name="__codelineno-7-44"></a>        <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">lastrowid</span>
</code></pre></div></td></tr></table></div>
<p><strong>Explanation:</strong></p>
<ul>
<li>The <strong>abstraction <code>ProductsRepository</code></strong> defines the interface for data
  access operations.</li>
<li>The <strong>high-level class (<code>ProductsService</code>)</strong> depends on this abstraction, not
  on concrete implementations.</li>
<li>The <strong>high-level class (<code>ProductsService</code>)</strong> implements business logic and
  depends on the <code>ProductsRepository</code> abstraction.</li>
<li><code>ProductsService</code> does not depend on the details of how data is stored or
  retrieved, and it is not <em>concerned</em> with those details.</li>
<li>The low-level class (<code>SQLProductsRepository</code>) implements the
  <code>ProductsRepository</code> interface using an SQL database.</li>
<li>It can be swapped out for another implementation (e.g.,
  <code>InMemoryProductsRepository</code>) without modifying the <code>ProductsService</code>.</li>
</ul>
<pre class="mermaid"><code>classDiagram
    class ProductsRepository {
        &lt;&lt;interface&gt;&gt;
        +get_all_products() list~Product~
        +get_product_by_id(product_id: int) Product | None
        +create_product(product: Product) int
    }

    class SQLProductsRepository {
        +get_all_products() list~Product~
        +get_product_by_id(product_id: int) Product | None
        +create_product(product: Product) int
    }

    class ProductsService {
        -repository: ProductsRepository
        +get_all_products() list~Product~
        +get_product_by_id(product_id: int) Product | None
        +create_product(product: Product) int
    }

    ProductsRepository &lt;-- SQLProductsRepository : implements
    ProductsService --&gt; ProductsRepository : depends on</code></pre>
<p>The benefits of DIP are:</p>
<ul>
<li><strong>Loose Coupling</strong>: The <code>ProductsService</code> is decoupled from the specific
  implementation of the repository.</li>
<li><strong>Flexibility</strong>: You can easily replace <code>SQLProductsRepository</code> with another
  implementation (e.g., a mock for testing).</li>
<li><strong>Testability</strong>: The <code>ProductsService</code> can be tested independently by
  injecting a mock or stub implementation of <code>ProductsRepository</code>.</li>
</ul>
<p>To better understand the concept, consider the following example that shows how
those classes can be imported and instantiated:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span>
<span class="normal"><a href="#__codelineno-8-22">22</a></span>
<span class="normal"><a href="#__codelineno-8-23">23</a></span>
<span class="normal"><a href="#__codelineno-8-24">24</a></span>
<span class="normal"><a href="#__codelineno-8-25">25</a></span>
<span class="normal"><a href="#__codelineno-8-26">26</a></span>
<span class="normal"><a href="#__codelineno-8-27">27</a></span>
<span class="normal"><a href="#__codelineno-8-28">28</a></span>
<span class="normal"><a href="#__codelineno-8-29">29</a></span>
<span class="normal"><a href="#__codelineno-8-30">30</a></span>
<span class="normal"><a href="#__codelineno-8-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">data.sql.products</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLProductsRepository</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">domain.products</span><span class="w"> </span><span class="kn">import</span> <span class="n">Product</span><span class="p">,</span> <span class="n">ProductsService</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="c1"># Set up an SQLite database connection</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;:memory:&quot;</span><span class="p">)</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="sd">    CREATE TABLE products (</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="sd">        id INTEGER PRIMARY KEY,</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="sd">        name TEXT NOT NULL,</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="sd">        description TEXT,</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="sd">        price REAL NOT NULL</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="sd">    )</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="p">)</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="hll"><span class="c1"># Instantiate the low-level module (SQLProductsRepository)</span>
</span><a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="hll"><span class="n">sql_repository</span> <span class="o">=</span> <span class="n">SQLProductsRepository</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
</span><a id="__codelineno-8-21" name="__codelineno-8-21"></a>
<a id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="hll"><span class="c1"># Instantiate the high-level module (ProductsService)</span>
</span><a id="__codelineno-8-23" name="__codelineno-8-23"></a><span class="hll"><span class="n">service</span> <span class="o">=</span> <span class="n">ProductsService</span><span class="p">(</span><span class="n">sql_repository</span><span class="p">)</span>
</span><a id="__codelineno-8-24" name="__codelineno-8-24"></a>
<a id="__codelineno-8-25" name="__codelineno-8-25"></a><span class="c1"># Use the service</span>
<a id="__codelineno-8-26" name="__codelineno-8-26"></a><span class="n">new_product</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span>
<a id="__codelineno-8-27" name="__codelineno-8-27"></a>    <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Laptop&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A powerful laptop&quot;</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mf">1200.00</span>
<a id="__codelineno-8-28" name="__codelineno-8-28"></a><span class="p">)</span>
<a id="__codelineno-8-29" name="__codelineno-8-29"></a><span class="n">product_id</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">create_product</span><span class="p">(</span><span class="n">new_product</span><span class="p">)</span>
<a id="__codelineno-8-30" name="__codelineno-8-30"></a><span class="nb">print</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">get_product_by_id</span><span class="p">(</span><span class="n">product_id</span><span class="p">))</span>
<a id="__codelineno-8-31" name="__codelineno-8-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">get_all_products</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
<p>As the number of dependencies grow, the code that instantiates objects can
easily become hard to maintain. To simplify the management of dependencies and
reduce the complexity of object instantiation, we can leverage a dependency
injection framework like Rodi.</p>
<h3 id="the-repository-pattern-example">The Repository pattern example<a class="headerlink" href="#the-repository-pattern-example" title="Permanent link">&para;</a></h3>
<p>The three classes described above: <code>ProductsService</code>, <code>ProductsRepository</code>, and
<code>SQLProductsRepository</code>, can be wired using Rodi this way:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span>
<span class="normal"><a href="#__codelineno-9-22">22</a></span>
<span class="normal"><a href="#__codelineno-9-23">23</a></span>
<span class="normal"><a href="#__codelineno-9-24">24</a></span>
<span class="normal"><a href="#__codelineno-9-25">25</a></span>
<span class="normal"><a href="#__codelineno-9-26">26</a></span>
<span class="normal"><a href="#__codelineno-9-27">27</a></span>
<span class="normal"><a href="#__codelineno-9-28">28</a></span>
<span class="normal"><a href="#__codelineno-9-29">29</a></span>
<span class="normal"><a href="#__codelineno-9-30">30</a></span>
<span class="normal"><a href="#__codelineno-9-31">31</a></span>
<span class="normal"><a href="#__codelineno-9-32">32</a></span>
<span class="normal"><a href="#__codelineno-9-33">33</a></span>
<span class="normal"><a href="#__codelineno-9-34">34</a></span>
<span class="normal"><a href="#__codelineno-9-35">35</a></span>
<span class="normal"><a href="#__codelineno-9-36">36</a></span>
<span class="normal"><a href="#__codelineno-9-37">37</a></span>
<span class="normal"><a href="#__codelineno-9-38">38</a></span>
<span class="normal"><a href="#__codelineno-9-39">39</a></span>
<span class="normal"><a href="#__codelineno-9-40">40</a></span>
<span class="normal"><a href="#__codelineno-9-41">41</a></span>
<span class="normal"><a href="#__codelineno-9-42">42</a></span>
<span class="normal"><a href="#__codelineno-9-43">43</a></span>
<span class="normal"><a href="#__codelineno-9-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">rodi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Container</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">data.sql.products</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLProductsRepository</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">domain.products</span><span class="w"> </span><span class="kn">import</span> <span class="n">Product</span><span class="p">,</span> <span class="n">ProductsRepository</span><span class="p">,</span> <span class="n">ProductsService</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="hll"><span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">()</span>
</span><a id="__codelineno-9-10" name="__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="hll"><span class="k">def</span><span class="w"> </span><span class="nf">connection_factory</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Connection</span><span class="p">:</span>
</span><a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a new SQLite database connection.&quot;&quot;&quot;</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;:memory:&quot;</span><span class="p">)</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="sd">        CREATE TABLE products (</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="sd">            id INTEGER PRIMARY KEY,</span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="sd">            name TEXT NOT NULL,</span>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="sd">            description TEXT,</span>
<a id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="sd">            price REAL NOT NULL</span>
<a id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="sd">        )</span>
<a id="__codelineno-9-23" name="__codelineno-9-23"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-9-24" name="__codelineno-9-24"></a>    <span class="p">)</span>
<a id="__codelineno-9-25" name="__codelineno-9-25"></a>    <span class="k">return</span> <span class="n">conn</span>
<a id="__codelineno-9-26" name="__codelineno-9-26"></a>
<a id="__codelineno-9-27" name="__codelineno-9-27"></a>
<a id="__codelineno-9-28" name="__codelineno-9-28"></a><span class="hll"><span class="n">container</span><span class="o">.</span><span class="n">add_transient_by_factory</span><span class="p">(</span><span class="n">connection_factory</span><span class="p">)</span>
</span><a id="__codelineno-9-29" name="__codelineno-9-29"></a><span class="hll"><span class="n">container</span><span class="o">.</span><span class="n">add_alias</span><span class="p">(</span><span class="s2">&quot;db_connection&quot;</span><span class="p">,</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Connection</span><span class="p">)</span>
</span><a id="__codelineno-9-30" name="__codelineno-9-30"></a>
<a id="__codelineno-9-31" name="__codelineno-9-31"></a><span class="hll"><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">ProductsRepository</span><span class="p">,</span> <span class="n">SQLProductsRepository</span><span class="p">)</span>
</span><a id="__codelineno-9-32" name="__codelineno-9-32"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">ProductsService</span><span class="p">)</span>
<a id="__codelineno-9-33" name="__codelineno-9-33"></a>
<a id="__codelineno-9-34" name="__codelineno-9-34"></a>
<a id="__codelineno-9-35" name="__codelineno-9-35"></a><span class="c1"># Obtain an instance of the service</span>
<a id="__codelineno-9-36" name="__codelineno-9-36"></a><span class="hll"><span class="n">service</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">ProductsService</span><span class="p">)</span>
</span><a id="__codelineno-9-37" name="__codelineno-9-37"></a>
<a id="__codelineno-9-38" name="__codelineno-9-38"></a><span class="c1"># Use the service</span>
<a id="__codelineno-9-39" name="__codelineno-9-39"></a><span class="n">new_product</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span>
<a id="__codelineno-9-40" name="__codelineno-9-40"></a>    <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Laptop&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A powerful laptop&quot;</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mf">1200.00</span>
<a id="__codelineno-9-41" name="__codelineno-9-41"></a><span class="p">)</span>
<a id="__codelineno-9-42" name="__codelineno-9-42"></a><span class="n">product_id</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">create_product</span><span class="p">(</span><span class="n">new_product</span><span class="p">)</span>
<a id="__codelineno-9-43" name="__codelineno-9-43"></a><span class="nb">print</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">get_product_by_id</span><span class="p">(</span><span class="n">product_id</span><span class="p">))</span>
<a id="__codelineno-9-44" name="__codelineno-9-44"></a><span class="nb">print</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">get_all_products</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
<p>Some interesting things are happening in this code:</p>
<ul>
<li>At line <em>9</em>, an instance of <code>rodi.Container</code> is created. This class is used
  to register the types that must be resolved, and to resolve those types.</li>
<li>It was not necessary to modify the source code of the classes being handled:
  Rodi inspects the code of registered types to know how to resolve them.</li>
<li>A factory function is used to define how the instance of <code>sqlite3.Connection</code>
  is to be created. This is convenient because the <code>connect</code> method, which
  returns an instance of that class, requires a <code>str</code>, and resolving base types
  with <code>DI</code> is not a good idea.</li>
<li>The factory has a return type annotation: Rodi uses that type annotation
  as the <em>key type</em> that is resolved using the factory function. Note that a factory
  might declare a more <strong>abstract</strong> type than the one it returns (following the DIP
  principle).</li>
<li>Since the constructor of the <code>SQLProductsRepository</code> class does not include a type
  annotation for its <code>db_connection</code> dependency, an alias is configured at line <em>29</em> to
  instruct the container to resolve parameters named <code>db_connection</code> as instances of
  <code>sqlite3.Connection</code>. Alternatively, we could have updated the source code of
  <code>SQLProductsRepository</code> to include a type annotation in its constructor.</li>
<li>At line <em>31</em>, the <strong>abstract</strong> type <code>ProductsRepository</code> is registered,
  instructing the container to resolve that type with the <strong>concrete</strong>
  implementation <code>SQLProductsRepository</code>. According to the <strong>DIP</strong> principle,
  when registering an abstract type and its implementation, Rodi requires
  using the abstract type as <em>key</em>.</li>
<li>At line <em>32</em>, the <code>ProductsService</code> type is also registered, because this is
  required to build the graph of dependencies.</li>
<li>At line <em>36</em>, an instance of <code>ProductsService</code> is obtained through <strong>DI</strong>.
  Since this is the first time the <code>Container</code> needs to resolve a type, it runs
  code inspections to build the tree of dependencies. These code inspections
  are executed only once, unless new types are registered in the same
  <code>Container</code>. The container obtains all necessary objects: from the
  <code>db_connection</code> and the <code>SQLProductsRepository</code> to resolve the <strong>abstract</strong>
  dependency <code>ProductsRepository</code>, used to instantiate the requested
  <code>ProductsService</code>.</li>
</ul>
<h2 id="rodis-use-cases">Rodi's use cases<a class="headerlink" href="#rodis-use-cases" title="Permanent link">&para;</a></h2>
<p>Rodi is designed to simplify objects instantiation and dependency management. It can
inspect constructors (<code>__init__</code> methods) and class properties to automatically resolve
dependencies.</p>
<p>Support for inspecting class properties is intended to reduce code verbosity. Note how
in the example below, it is necessary to write three times 'dependency':</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">:</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="o">...</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">:</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependency</span><span class="p">:</span> <span class="n">A</span><span class="p">):</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dependency</span> <span class="o">=</span> <span class="n">dependency</span>
</code></pre></div>
<p>The same classes can be written this way:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">:</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    <span class="o">...</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">:</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>    <span class="n">dependency</span><span class="p">:</span> <span class="n">A</span>
</code></pre></div>
<p>Rodi would automatically instantiate <code>B</code> and populate its <code>dependency</code> property
with an instance of <code>A</code>.</p>
<pre class="mermaid"><code>graph TD
    A[Rodi] --&gt; B[Resolves __init__ methods]
    A --&gt; C[Resolves class properties]</code></pre>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Using constructors</label><label for="__tabbed_1_2">Using class properties</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">rodi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Container</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">:</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>    <span class="o">...</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">:</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="hll">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependency</span><span class="p">:</span> <span class="n">A</span><span class="p">):</span>
</span><a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">dependency</span> <span class="o">=</span> <span class="n">dependency</span>
</span><a id="__codelineno-12-9" name="__codelineno-12-9"></a>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">()</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-12-14" name="__codelineno-12-14"></a>
<a id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="n">example</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<a id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">dependency</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">rodi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Container</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">:</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a>    <span class="o">...</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">:</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="hll">    <span class="n">dependency</span><span class="p">:</span> <span class="n">A</span>
</span><a id="__codelineno-13-8" name="__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">()</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="n">example</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">dependency</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="container-lifetime">Container lifetime<a class="headerlink" href="#container-lifetime" title="Permanent link">&para;</a></h3>
<p>The primary use case of Rodi is to instantiate a single <code>Container</code> object, configure it
with all required dependencies at application startup, and maintain it in an immutable
state throughout the application's lifetime. It is anyway possible to work with multiple
containers, and to modify them even after the dependency graph has been built. Modifying
a <code>Container</code> after the dependency graph has been built is an anti-pattern and can lead
to unexpected behaviour. More details on this subject are provided in the next page.</p>
<h3 id="sync-vs-async">Sync vs Async<a class="headerlink" href="#sync-vs-async" title="Permanent link">&para;</a></h3>
<p>Rodi is designed for synchronous code. It intentionally does not provide an asynchronous
code API because object constructors should be lightweight and run synchronously.
Supporting asynchronous type resolution would introduce performance overhead due to the
complexity of asynchronous operations, and the extra machinery they require.</p>
<p>Constructors (<code>__init__</code> methods) are typically designed to be lightweight and avoid
CPU intensive blocking operations or performing I/O operations.</p>
<h3 id="type-annotations">Type annotations<a class="headerlink" href="#type-annotations" title="Permanent link">&para;</a></h3>
<p>Rodi can use both type annotations and naming conventions to build graphs of
dependencies.</p>
<p>Type annotations is the recommended way to keep the code clean and explicit.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Using type annotations (recommended)</label><label for="__tabbed_2_2">Using naming conventions</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span>
<span class="normal"><a href="#__codelineno-14-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">rodi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Container</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">:</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a>    <span class="o">...</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">:</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="hll">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependency</span><span class="p">:</span> <span class="n">A</span><span class="p">):</span>  <span class="c1"># &lt;-- with type annotation</span>
</span><a id="__codelineno-14-8" name="__codelineno-14-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dependency</span> <span class="o">=</span> <span class="n">dependency</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">()</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="n">example</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<a id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">dependency</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span>
<span class="normal"><a href="#__codelineno-15-17">17</a></span>
<span class="normal"><a href="#__codelineno-15-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">rodi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Container</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">:</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a>    <span class="o">...</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">:</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="hll">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependency</span><span class="p">):</span>  <span class="c1"># &lt;-- no type annotation</span>
</span><a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">dependency</span> <span class="o">=</span> <span class="n">dependency</span>
</span><a id="__codelineno-15-9" name="__codelineno-15-9"></a>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">()</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="hll"><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</span><a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="hll"><span class="n">container</span><span class="o">.</span><span class="n">add_alias</span><span class="p">(</span><span class="s2">&quot;dependency&quot;</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>  <span class="c1"># &lt;-- required to resolve</span>
</span><a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-15-15" name="__codelineno-15-15"></a>
<a id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="n">example</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-15-17" name="__codelineno-15-17"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<a id="__codelineno-15-18" name="__codelineno-15-18"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">dependency</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="automatic-aliases">Automatic aliases<a class="headerlink" href="#automatic-aliases" title="Permanent link">&para;</a></h3>
<p>Rodi supports automatic aliases. When a type is registered, the container creates a
set of aliases based on the class name. Consider the following example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">rodi</span><span class="w"> </span><span class="kn">import</span> <span class="n">Container</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="hll"><span class="k">class</span><span class="w"> </span><span class="nc">CatsRepository</span><span class="p">:</span> <span class="o">...</span>
</span><a id="__codelineno-16-5" name="__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">:</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="hll">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cats_repository</span><span class="p">):</span>
</span><a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">cats_repository</span> <span class="o">=</span> <span class="n">cats_repository</span>
</span><a id="__codelineno-16-10" name="__codelineno-16-10"></a>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">()</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">CatsRepository</span><span class="p">)</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="n">container</span><span class="o">.</span><span class="n">add_transient</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="n">example</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">cats_repository</span><span class="p">,</span> <span class="n">CatsRepository</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Aliases are only used when type annotations are missing. They serve solely as a
<em>fallback</em> and always refer to a type that can be resolved.</p>
<p>This design decision is based on the assumption that classes <em>usually</em> have names that
are distinct enough to be unambiguously identified, even across namespaces.</p>
<p>In the example above, the following set of aliases is created for the registered types:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>  <span class="s1">&#39;CatsRepository&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">__main__</span><span class="o">.</span><span class="n">CatsRepository</span><span class="s1">&#39;&gt;},</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>  <span class="s1">&#39;catsrepository&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">__main__</span><span class="o">.</span><span class="n">CatsRepository</span><span class="s1">&#39;&gt;},</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>  <span class="s1">&#39;cats_repository&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">__main__</span><span class="o">.</span><span class="n">CatsRepository</span><span class="s1">&#39;&gt;},</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>  <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">__main__</span><span class="o">.</span><span class="sa">B</span><span class="s1">&#39;&gt;},</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>  <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="err">&#39;</span><span class="nc">__main__</span><span class="o">.</span><span class="sa">B</span><span class="s1">&#39;&gt;}</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="p">}</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Disabling automatic aliases.</p>
<p>Some programmers might dislike the automatic aliasing feature, as it can lead to
unexpected behavior if naming conventions are not followed consistently. To disable this
feature, set the <code>strict</code> parameter to <code>True</code> when creating the container:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">container</span> <span class="o">=</span> <span class="n">Container</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
</div>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>This page covered the ABCs of Dependency Injection and Rodi. The general concepts
presented here apply to others DI frameworks as well.</p>
<p>The next page will start diving into Rodi's details, starting with explaining how to
<a href="../registering-types/">register types</a>.</p>
<div class="nt-contribs"><p class="nt-mod-time">Last modified on: 2025-04-13 14:25:25</p><div class="nt-contributors"><div class="nt-contributor nt-group-0" title="Roberto Prevato &lt;roberto.prevato@gmail.com&gt; (2)"><span class="nt-initials">RP</span></div></div></div>





<!-- Giscus snippet -->
<script src="https://giscus.app/client.js"
    data-repo="Neoteroi/BlackSheep-Docs"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzNzYyOTM4ODI="
    data-category="Q&A"
    data-category-id="DIC_kwDOFm3J-s4CSpF8"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="dark_tritanopia"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
</script>

<!-- Synchronize Giscus theme with palette -->
<script>
  var giscus = document.querySelector("script[src*=giscus]")

  /* Set palette on initial load */
  var palette = __md_get("__palette")
  if (palette && typeof palette.color === "object") {
    var theme = palette.color.scheme === "slate" ? "dark" : "light"
    giscus.setAttribute("data-theme", theme)
  }

  /* Register event handlers after documented loaded */
  document.addEventListener("DOMContentLoaded", function() {
    var ref = document.querySelector("[data-md-component=palette]")
    ref.addEventListener("change", function() {
      var palette = __md_get("__palette")
      if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"

        /* Instruct Giscus to change theme */
        var frame = document.querySelector(".giscus-frame")
        frame.contentWindow.postMessage(
          { giscus: { setConfig: { theme } } },
          "https://giscus.app"
        )
      }
    })
  })
</script>

                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Overview
              </div>
            </div>
          </a>
        
        
          
          <a href="../registering-types/" class="md-footer__link md-footer__link--next" aria-label="Next: Registering types">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Registering types
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.footer", "content.code.copy", "content.action.view"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../js/fullscreen.js"></script>
      
    
  </body>
</html>